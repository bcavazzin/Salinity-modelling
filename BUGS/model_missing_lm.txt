model {

  for (i in 1:n_dat) {
    for (j in 1:n_bac) {
      bac[i,j] ~ dnorm(mu[i,j], tau)
      mu[i,j] = alpha[j] + beta[j]*envir[i]
    } 
    envir[i] ~ dnorm(mu.x, p.x)
  }

  ## priors
  
  tau = 1/pow(sd.tau, 2)
  sd.tau ~ dunif(0, 10)
 
  for (i in 1:n_bac) {
    alpha[i] ~ dnorm(0, 0.001)
    beta[i] ~ dnorm(0, 0.001)
  }

  mu.x ~ dunif(-10, 10)
  p.x = 1/pow(sd.x, 2)
  sd.x ~ dunif(0, 10)
  
  missing = exp(envir[n_dat])
}
